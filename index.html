<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Birthday Magic ‚ú®</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Georgia', serif;
}

/* INTRO */
#intro{
  position:fixed;
  inset:0;
  background:black;
  color:white;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:10;
  text-align:center;
}

#hello{
  font-size:42px;
}

#subtitle{
  font-size:18px;
  opacity:0.8;
  margin:10px 0 20px;
}

/* TIMER */
#timer{
  font-size:64px;
  animation:pulse 1s infinite;
}

@keyframes pulse{
  from{opacity:0.5}
  to{opacity:1}
}

/* BUTTON */
#startBtn{
  display:none;
  padding:14px 40px;
  font-size:18px;
  border:none;
  border-radius:30px;
  background:linear-gradient(135deg,#dcdcdc,#ffffff);
  cursor:pointer;
  box-shadow:0 0 20px rgba(255,255,255,0.6);
}

/* MAIN */
#main{
  display:none;
  height:100vh;
  overflow:hidden;
}

video{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:-2;
}

.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.55);
  z-index:-1;
}

/* POEM */
#poem{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:90%;
  max-width:900px;
  text-align:center;
  color:#f5f5f5;
  font-size:30px;
  line-height:1.7;
  opacity:0;
  transition:opacity 1.6s ease;
  text-shadow:0 0 18px rgba(255,255,255,0.45);
}

/* STARS */
.star{
  position:absolute;
  background:white;
  border-radius:50%;
  animation:twinkle 2.5s infinite alternate;
}

@keyframes twinkle{
  from{opacity:0.3}
  to{opacity:1}
}
</style>
</head>

<body>

<!-- INTRO -->
<div id="intro">
  <div id="hello">Hello Bro ‚≠ê</div>
  <div id="subtitle">A quiet gift from the stars ‚ú®</div>
  <div id="timer">3</div>
  <button id="startBtn" onclick="startMagic()">Tap</button>
</div>

<!-- MAIN -->
<div id="main">
  <video autoplay muted loop playsinline>
    <source src="background.mp4" type="video/mp4">
  </video>
  <div class="overlay"></div>
  <div id="poem"></div>
</div>

<script>
/* POEM */
const lines = [
  "Long ago, in the vast expanse of the cosmos,",
  "a fragile planet spun alone beneath violent skies.",
  "Storms raged, meteors threatened, darkness crept in.",
  "Yet unseen, A guardian bent his paths for its safety.",
  "As comets struck, he absorbed the blows.",
  "As chaos grew, he became the gravity.",
  "When darkness came, he shone like a constellation.",
  "That planet is me.",
  "And you, my chosen Brother, my universe of protection.",
  "Happy Birthday to you, my Universe‚Äôs Shield.",
  "Stay happy, be successful, and may your dreams find you.",
  "A Brother, not by blood, but by the stars."
];

const poemDiv = document.getElementById("poem");
const intro = document.getElementById("intro");
const main = document.getElementById("main");

/* REMOVE EMOJIS */
function removeEmojis(text){
  return text.replace(
    /([\u2700-\u27BF]|[\uE000-\uF8FF]|[\uD83C-\uDBFF\uDC00-\uDFFF])/g,
    ""
  );
}

/* TIMER */
let count = 3;
const timer = document.getElementById("timer");
const btn = document.getElementById("startBtn");

const t = setInterval(()=>{
  count--;
  timer.innerText = count;
  if(count === 0){
    clearInterval(t);
    timer.style.display="none";
    btn.style.display="inline-block";
  }
},1000);

/* MUSIC */
const music = new Audio("bgmusic.mp3");
music.loop = true;
music.volume = 0.85;

/* üå∏ SOFTEST FEMALE VOICE */
let softVoice = null;

function loadVoices(){
  const voices = speechSynthesis.getVoices();
  softVoice =
    voices.find(v =>
      v.lang.startsWith("en") &&
      (
        v.name.includes("Samantha") ||
        v.name.includes("Google") ||
        v.name.includes("Microsoft") ||
        v.name.includes("Female")
      )
    ) || voices.find(v => v.lang.startsWith("en"));
}

speechSynthesis.onvoiceschanged = loadVoices;
loadVoices();

/* START */
function startMagic(){
  intro.style.display="none";
  main.style.display="block";
  music.play().catch(()=>{});
  playPoem();
}

/* üéôÔ∏è ULTRA-SOFT POEM */
function playPoem(){
  let index = 0;
  speechSynthesis.cancel();

  function showLine(){
    if(index >= lines.length) return;

    poemDiv.innerText = lines[index];
    poemDiv.style.opacity = 1;

    const utter = new SpeechSynthesisUtterance(
      removeEmojis(lines[index])
    );

    utter.voice = softVoice;

    /* MAXIMUM SOFTNESS */
    utter.rate = 0.62;   // very slow
    utter.pitch = 0.95; // warm & smooth
    utter.volume = 0.9;

    utter.onstart = () => {
      music.volume = 0.5;
    };

    utter.onend = () => {
      poemDiv.style.opacity = 0;
      music.volume = 0.85;
      index++;
      setTimeout(showLine, 3000); // long gentle pause
    };

    setTimeout(()=>{
      speechSynthesis.speak(utter);
    }, 800); // breathing space
  }

  showLine();
}

/* STARS */
for(let i=0;i<160;i++){
  const s=document.createElement("div");
  s.className="star";
  const size=Math.random()*3+1;
  s.style.width=size+"px";
  s.style.height=size+"px";
  s.style.top=Math.random()*100+"%";
  s.style.left=Math.random()*100+"%";
  s.style.animationDuration=(Math.random()*3+2)+"s";
  main.appendChild(s);
}
</script>

</body>
</html>
