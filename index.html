<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Birthday Magic ‚ú®</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Georgia', serif;
}

/* INTRO */
#intro{
  position:fixed;
  inset:0;
  background:black;
  color:white;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:10;
  text-align:center;
}

#hello{ font-size:42px; }
#subtitle{
  font-size:18px;
  opacity:0.8;
  margin:10px 0 20px;
}

/* TIMER */
#timer{
  font-size:64px;
  animation:pulse 1s infinite;
}
@keyframes pulse{ from{opacity:.5} to{opacity:1} }

/* BUTTON */
#startBtn{
  display:none;
  padding:14px 40px;
  font-size:18px;
  border:none;
  border-radius:30px;
  background:linear-gradient(135deg,#dcdcdc,#ffffff);
  cursor:pointer;
}

/* MAIN */
#main{
  display:none;
  height:100vh;
  overflow:hidden;
}

video{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:-2;
}

.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  z-index:-1;
}

#poem{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:90%;
  max-width:900px;
  text-align:center;
  color:#f5f5f5;
  font-size:30px;
  line-height:1.7;
  opacity:0;
  transition:opacity 1.8s ease;
  text-shadow:0 0 18px rgba(255,255,255,.45);
}

/* STARS */
.star{
  position:absolute;
  background:white;
  border-radius:50%;
  animation:twinkle 3s infinite alternate;
}
@keyframes twinkle{ from{opacity:.3} to{opacity:1} }
</style>
</head>

<body>

<div id="intro">
  <div id="hello">Hello Bro ‚≠ê</div>
  <div id="subtitle">A quiet gift from the stars ‚ú®</div>
  <div id="timer">3</div>
  <button id="startBtn" onclick="startMagic()">Tap</button>
</div>

<div id="main">
  <video autoplay muted loop playsinline>
    <source src="background.mp4" type="video/mp4">
  </video>
  <div class="overlay"></div>
  <div id="poem"></div>
</div>

<script>
/* POEM */
const lines = [
  "Long ago, in the vast expanse of the cosmos,",
  "a fragile planet spun alone beneath violent skies.",
  "Storms raged, meteors threatened, darkness crept in.",
  "Yet unseen, A Guardian bent his paths for its safety.",
  "As comets struck, he absorbed the blows.",
  "As chaos grew, he became it's gravity.",
  "When darkness came, he shone like a constellation.",
  "That planet is me.",
  "And you, my chosen Brother, my Universe of protection.",
  "Happy Birthday to you, my universe‚Äôs shield.",
  "Stay happy, be successful, and may your dreams find you.",
  "A Brother, not by blood, but by the stars."
];

const poemDiv = document.getElementById("poem");

/* TIMER */
let count=3;
const timer=document.getElementById("timer");
const btn=document.getElementById("startBtn");
const t=setInterval(()=>{
  count--;
  timer.textContent=count;
  if(count===0){
    clearInterval(t);
    timer.style.display="none";
    btn.style.display="inline-block";
  }
},1000);

/* MUSIC */
const music=new Audio("bgmusic.mp3");
music.loop=true;
music.volume=0.8;

/* üå∏ FORCE FEMALE VOICE */
let femaleVoice=null;

function loadVoices(){
  const voices=speechSynthesis.getVoices();

  femaleVoice = voices.find(v =>
    v.lang.startsWith("en") &&
    (
      v.name.includes("Samantha") ||
      v.name.includes("Karen") ||
      v.name.includes("Google UK English Female") ||
      v.name.includes("Google US English") ||
      v.name.includes("Microsoft Zira") ||
      v.name.toLowerCase().includes("female")
    )
  );

  if(!femaleVoice){
    alert("‚ö†Ô∏è No female English voice found on this device. Please use Chrome or Safari.");
  }
}

speechSynthesis.onvoiceschanged=loadVoices;
loadVoices();

/* START */
function startMagic(){
  document.getElementById("intro").style.display="none";
  document.getElementById("main").style.display="block";
  music.play().catch(()=>{});
  playPoem();
}

/* ULTRA SOFT FEMALE SPEECH */
function playPoem(){
  let i=0;
  speechSynthesis.cancel();

  function speak(){
    if(i>=lines.length) return;

    poemDiv.textContent=lines[i];
    poemDiv.style.opacity=1;

    const u=new SpeechSynthesisUtterance(lines[i]);
    u.voice=femaleVoice;

    u.rate=0.6;     // VERY slow
    u.pitch=1.1;    // feminine
    u.volume=0.9;

    u.onstart=()=>music.volume=0.45;
    u.onend=()=>{
      poemDiv.style.opacity=0;
      music.volume=0.8;
      i++;
      setTimeout(speak,3200);
    };

    setTimeout(()=>speechSynthesis.speak(u),1000);
  }

  speak();
}

/* STARS */
for(let i=0;i<160;i++){
  const s=document.createElement("div");
  s.className="star";
  const size=Math.random()*3+1;
  s.style.width=size+"px";
  s.style.height=size+"px";
  s.style.top=Math.random()*100+"%";
  s.style.left=Math.random()*100+"%";
  main.appendChild(s);
}
</script>

</body>
</html>
